---
import ContentItem from '@components/ContentItem.astro'
import Section from '@components/Section.astro'
import SectionTitle from '@components/SectionTitle.astro'
import { findAndReplaceAssetUrl, ghostClient } from '@libs/ghost'

const posts = await ghostClient.posts.browse({
  limit: 'all',
  include: ['tags'],
})
---

<Section>
  <SectionTitle>Content</SectionTitle>
  <div class="flex flex-col md:grid md:grid-cols-2 gap-5">
    {
      posts.map((post) => (
        <ContentItem
          title={post.title!}
          creationDate={new Date(post.published_at!)}
          tags={post.tags?.map((t) => t.name!) ?? []}
          url={`/blog/${post.slug}`}
          cover={findAndReplaceAssetUrl(post.feature_image!)}
        />
      ))
    }
  </div>
</Section>
