---
import type { EntryBlokProps } from '@appTypes/entry-blok'
import BlogEntrySection from '@components/sections/BlogEntrySection.astro'
import MainLayout from '@layouts/MainLayout.astro'
import type { Blok } from '@libs/space-blok'
import { spaceBlokService } from '@services/space-blok-service'

export type Props = {
  entry: Blok<EntryBlokProps>
}

export async function getStaticPaths() {
  const entries = await spaceBlokService.getBlogEntries()
  return [
    ...entries.map((entry) => ({
      params: { slug: entry.properties.link },
    })),
  ]
}

const { slug } = Astro.params
const entry = await spaceBlokService.getBlogEntryBySlug(`${slug}`)
---

<MainLayout title={entry.title}>
  <BlogEntrySection entry={entry} />
</MainLayout>
